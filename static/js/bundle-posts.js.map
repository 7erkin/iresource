{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./frontend/js/posts/controller.js","webpack:///./frontend/js/posts/index.js","webpack:///./frontend/js/posts/model.js","webpack:///./frontend/js/posts/strategy/search.js","webpack:///./frontend/js/posts/strategy/sort-factory.js","webpack:///./frontend/js/posts/strategy/sort.js","webpack:///./frontend/js/posts/view-library.js","webpack:///./frontend/js/posts/view-wait.js","webpack:///./frontend/js/posts/view.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,cAAc,mBAAO,CAAC,6CAAS;AAC/B,aAAa,mBAAO,CAAC,2CAAQ;AAC7B,4BAA4B,mBAAO,CAAC,6EAAyB;AAC7D,qBAAqB,mBAAO,CAAC,iEAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4B;;;;;;;;;;;ACxCA,mBAAmB,mBAAO,CAAC,uDAAc;;AAEzC;AACA,kB;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uB;;;;;;;;;;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qC;;;;;;;;;;;ACXA,sBAAsB,mBAAO,CAAC,oDAAQ;AACtC,wBAAwB,mBAAO,CAAC,oDAAQ;AACxC,0BAA0B,mBAAO,CAAC,oDAAQ;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6B;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,qD;;;;;;;;;;;AC5BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,QAAQ;AACrE;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+F;;;;;;;;;;;ACnCA;AACA,iE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0B;;;;;;;;;;;ACnBA,oBAAoB,mBAAO,CAAC,2DAAgB;AAC5C,oBAAoB,mBAAO,CAAC,2DAAgB;AAC5C,8BAA8B,mBAAO,CAAC,2DAAgB;AACtD,4BAA4B,mBAAO,CAAC,2DAAgB;AACpD,8BAA8B,mBAAO,CAAC,2DAAgB;AACtD,2BAA2B,mBAAO,CAAC,2DAAgB;AACnD,wBAAwB,mBAAO,CAAC,2DAAgB;AAChD,iBAAiB,mBAAO,CAAC,qDAAa;;AAEtC;AACA,mB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sB","file":"bundle-posts.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./frontend/js/posts/index.js\");\n","const Model = require('./model');\r\nconst View = require('./view');\r\nconst SortStrategyFactory = require('./strategy/sort-factory');\r\nconst SearchByName = require('./strategy/search');\r\n\r\nconst sortStrategyFactory = new SortStrategyFactory();\r\n\r\nconst HOW_MANY_DEALS_TO_RENDER = 8;\r\n\r\nclass Controller{\r\n    constructor(){\r\n        this._view = new View();\r\n        this._model = new Model();\r\n\r\n        this._model.addSubscriber(this._view);\r\n\r\n        this._view.onPaginationButtonClicked = this.onPaginationButtonClicked.bind(this);\r\n        this._view.onSearchButtonClicked = this.onSearchButtonClicked.bind(this);\r\n        this._view.onSortButtonClicked = this.onSortButtonClicked.bind(this);\r\n    }\r\n    init() {\r\n        this._view.initUpdate();\r\n    }\r\n    onSortButtonClicked(buttonClasses){\r\n        const sortStrategyInstance = sortStrategyFactory.createSortStrategy(buttonClasses);\r\n        this._model.setSortStrategy(sortStrategyInstance);\r\n        this._model.sort();\r\n    }\r\n    onSearchButtonClicked(buttonClasses, inputValue){\r\n        if(inputValue === '') {\r\n            this._view.removeViewWait();\r\n            return;\r\n        }\r\n        const searchStrategyInstance = new SearchByName(inputValue);\r\n        this._model.setSearchStrategy(searchStrategyInstance);\r\n        this._model.search();\r\n    }\r\n    onPaginationButtonClicked(paginationValue){}\r\n}\r\n\r\nmodule.exports = Controller;","const Controller = require('./controller');\r\n\r\nconst controller = new Controller();\r\ncontroller.init();","class Model {\r\n    constructor() {\r\n        this._originalDeals = [\r\n            {\r\n                id: 3,\r\n                name: \"Polys Gold\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 10,\r\n                comment: 10,\r\n                watcher: 10000,\r\n                image: 'https://vanin-invest.com/wp-content/uploads/2016/09/Polyus.jpg'\r\n            },\r\n            {\r\n                id: 4,\r\n                name: \"Aeroflot\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 100,\r\n                comment: 30,\r\n                watcher: 10000,\r\n                image: 'https://regnum.ru/uploads/pictures/news/2017/10/11/regnum_picture_15077158461288890_big.jpg'\r\n            },\r\n            {\r\n                id: 5,\r\n                name: \"Phosagro\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 260,\r\n                comment: 120,\r\n                watcher: 10000,\r\n                image: 'http://toplogos.ru/images/logo-phosagro.png'\r\n            },\r\n            {\r\n                id: 2,\r\n                name: \"Mechel\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 30,\r\n                comment: 210,\r\n                watcher: 10000,\r\n                image: 'http://cdn.forbes.ru/files/presets/900_566/profile/magnit3.jpg__1506495387__73040__vid422245e.jpg'\r\n            },\r\n            {\r\n                id: 1,\r\n                name: \"Apple\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 20,\r\n                comment: 10,\r\n                watcher: 10000,\r\n                image: 'https://www.apple.com/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480_2x.jpg'\r\n            },\r\n            {\r\n                id: 3,\r\n                name: \"Polys Gold\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 10,\r\n                comment: 10,\r\n                watcher: 10000,\r\n                image: 'https://vanin-invest.com/wp-content/uploads/2016/09/Polyus.jpg'\r\n            },\r\n            {\r\n                id: 4,\r\n                name: \"Aeroflot\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 100,\r\n                comment: 30,\r\n                watcher: 10000,\r\n                image: 'https://regnum.ru/uploads/pictures/news/2017/10/11/regnum_picture_15077158461288890_big.jpg'\r\n            },\r\n            {\r\n                id: 5,\r\n                name: \"Phosagro\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 260,\r\n                comment: 120,\r\n                watcher: 10000,\r\n                image: 'http://toplogos.ru/images/logo-phosagro.png'\r\n            },\r\n            {\r\n                id: 2,\r\n                name: \"Mechel\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 30,\r\n                comment: 210,\r\n                watcher: 10000,\r\n                image: 'http://cdn.forbes.ru/files/presets/900_566/profile/magnit3.jpg__1506495387__73040__vid422245e.jpg'\r\n            },\r\n            {\r\n                id: 1,\r\n                name: \"Apple\",\r\n                datePublish: \"20.12.2018\",\r\n                like: 20,\r\n                comment: 10,\r\n                watcher: 10000,\r\n                image: 'https://www.apple.com/ac/ac-video-posterframe/1.0/images/ac-video-poster_848x480_2x.jpg'\r\n            }\r\n        ];\r\n        this._transformedDeals = this._originalDeals.slice();\r\n        this._sortStrategy;\r\n        this._searchStrategy;\r\n        this._subscribers = new Set();\r\n    }\r\n    addSubscriber(subscriber){\r\n        this._subscribers.add(subscriber);\r\n    }\r\n    removeSubscriber(subscriber){\r\n        this._subscribers.delete(subscriber);\r\n    }\r\n    notify(){\r\n        for(let subscriber of this._subscribers)\r\n            subscriber.update(this._transformedDeals);\r\n    }\r\n    setSortStrategy(sortStrategy) {\r\n        this._sortStrategy = sortStrategy;\r\n    }\r\n    setSearchStrategy(searchStrategy) {\r\n        this._searchStrategy = searchStrategy;\r\n    }\r\n    sort(){\r\n        this._sortStrategy.sort(this._transformedDeals);\r\n        this.notify(this._transformedDeals);\r\n    }\r\n    search(){\r\n        this._transformedDeals = this._searchStrategy.search(this._originalDeals);\r\n        this._sortStrategy.sort(this._transformedDeals);\r\n        this.notify();\r\n    }\r\n}\r\n\r\nmodule.exports = Model;","class SearchStrategy{\r\n    constructor(strategy){\r\n        this.search = strategy;\r\n    }\r\n}\r\nclass SearchByCompanyName extends SearchStrategy {\r\n    constructor(companyname) {\r\n        super(deals => deals.filter(deal => deal.name.toUpperCase() == companyname.toUpperCase()));\r\n    }\r\n}\r\n\r\nmodule.exports = SearchByCompanyName;","const SortByPopular = require('./sort').SortByPopular;\r\nconst SortByDiscussed = require('./sort').SortByDiscussed;\r\nconst SortByPublishDate = require('./sort').SortByPublishDate;\r\n\r\nclass SortFactory{\r\n    constructor() {\r\n       this._buttonClassToSortStrategy =  new Map([\r\n            ['button-most-popular', () => new SortByPopular()],\r\n            ['button-most-discussed', () => new SortByDiscussed()],\r\n            ['button-publish-date', () => new SortByPublishDate()]\r\n        ]);\r\n    }\r\n    createSortStrategy(buttonClasses) {\r\n        for(let key of this._buttonClassToSortStrategy)\r\n            if(buttonClasses.indexOf(key[0]) !== -1)\r\n                return this._buttonClassToSortStrategy.get(key[0])();\r\n    }\r\n}\r\n\r\nmodule.exports = SortFactory;","class SortStrategy {\r\n    constructor(strategy){\r\n        this.sort = strategy\r\n    }\r\n}\r\n\r\nclass SortByPopular extends SortStrategy {\r\n    constructor() {\r\n        super((deals) => deals.sort((deal1, deal2) => -deal1.like + deal2.like));\r\n    }\r\n}\r\n\r\nclass SortByDiscussed extends SortStrategy {\r\n    constructor() {\r\n        super((deals) => deals.sort((deal1, deal2) => -deal1.comment + deal2.comment));\r\n    }\r\n}\r\n\r\nclass SortByPublishDate extends SortStrategy {\r\n    constructor() {\r\n        super((deals) => deals.sort((deal1, deal2) => -deal1.datePublish + deal2.datePublish));\r\n    }\r\n}\r\n\r\nmodule.exports.SortByPopular = SortByPopular;\r\n\r\nmodule.exports.SortByDiscussed = SortByDiscussed;\r\n\r\nmodule.exports.SortByPublishDate = SortByPublishDate;","module.exports.removePosts = () => {\r\n    document.\r\n        querySelector('.post-list').innerHTML = '';\r\n};\r\n\r\nmodule.exports.renderPosts = posts => {\r\n    const templateElement = document.getElementById('template');\r\n    const templatepostNode = templateElement.content.querySelector('.post-item');\r\n    const fragment = document.createDocumentFragment();\r\n    posts.forEach(post => {\r\n        let postNode = templatepostNode.cloneNode(true);\r\n        postNode.querySelector('.post-item-name').innerText = post.name;\r\n        postNode.querySelector('img').src = post.image;\r\n        postNode.querySelector('.likes').innerText = post.like;\r\n        postNode.querySelector('.comments').innerText = post.comment;\r\n        postNode.querySelector('.publish-date').innerText = post.datePublish;\r\n        postNode.querySelector('.watchers').innerText = post.watcher;\r\n        postNode.querySelector('.read-post').href = `/post/${post.id}`;\r\n        fragment.appendChild(postNode);\r\n    });\r\n    document.querySelector('.post-list').appendChild(fragment);\r\n};\r\n\r\nmodule.exports.getActiveSortButton = () => document.querySelector('#sort .button-active');\r\n\r\nmodule.exports.isActiveFilterChoosen = (node) => {\r\n    return Array.prototype.indexOf.call(node.classList, 'button-active') === 0;\r\n};\r\n\r\nmodule.exports.updateActiveButton = (parentCssSelector, node) => {\r\n    const activeButtonNode = document.querySelector(parentCssSelector + ' .' + 'button-active');\r\n    activeButtonNode.classList.remove('button-active');\r\n    node.classList.add('button-active');\r\n};\r\n\r\nmodule.exports.clearSearchForm = () => document.querySelector('.form-search input').value = '';","const template = document.querySelector('#template');\r\nconst waitNode = template.content.querySelector('#wait-element'); \r\n\r\nclass ViewWait{\r\n    constructor() {\r\n\r\n    }\r\n    set(){\r\n        const postList = document.querySelector('.post-list');\r\n        const node = waitNode.cloneNode(true);\r\n        postList.appendChild(node);\r\n    }\r\n    remove(){\r\n        const node = document.querySelector('#wait-element');\r\n        if(node == undefined) return;\r\n        node.remove();\r\n    }\r\n}\r\n\r\nmodule.exports = ViewWait;","const removePosts = require('./view-library').removePosts;\r\nconst renderPosts = require('./view-library').renderPosts;\r\nconst getActiveFilterButton = require('./view-library').getActiveFilterButton;\r\nconst getActiveSortButton = require('./view-library').getActiveSortButton;\r\nconst isActiveFilterChoosen = require('./view-library').isActiveFilterChoosen;\r\nconst updateActiveButton = require('./view-library').updateActiveButton;\r\nconst clearSearchForm = require('./view-library').clearSearchForm;\r\nconst ViewWait = require('./view-wait');\r\n\r\nclass View {\r\n    constructor() {        \r\n        document\r\n            .getElementById('sort')\r\n            .addEventListener('click', (evt) => {\r\n                if(evt.target.tagName.toLowerCase() !== 'button')\r\n                    return;\r\n                if(isActiveFilterChoosen(evt.target))\r\n                    return;\r\n\r\n                updateActiveButton('#sort', evt.target);\r\n                this.setViewWait();\r\n                const buttonClasses = Array.from(evt.target.classList);\r\n                this.onSortButtonClicked(buttonClasses);\r\n            });\r\n\r\n        document\r\n            .querySelector('.form-search')\r\n            .addEventListener('submit', evt => {\r\n                evt.preventDefault();\r\n                this.setViewWait();\r\n                const inputValue = document.querySelector('.form-search input[type=\"search\"]').value;\r\n                this.onSearchButtonClicked(['button-search'], inputValue);\r\n        });\r\n        document\r\n            .querySelector('.pagination')\r\n            .addEventListener('click', evt => {\r\n                this.setViewWait();\r\n                this.onPaginationButtonClicked();\r\n            });\r\n\r\n        this._viewWait = new ViewWait();\r\n    }\r\n    update(posts){\r\n        removePosts();\r\n        renderPosts(posts);\r\n        this.removeViewWait();\r\n    }\r\n    initUpdate(){\r\n        const activeSortButton = getActiveSortButton();\r\n\r\n        this.onSortButtonClicked(Array.from(activeSortButton.classList));\r\n    }\r\n    setViewWait() {\r\n        this._viewWait.set();\r\n    }\r\n    removeViewWait(){\r\n        this._viewWait.remove();\r\n    }\r\n    onSearchButtonClicked() {}\r\n    onSortButtonClicked() {}\r\n    onPaginationButtonClicked() {}\r\n}\r\n\r\nmodule.exports = View;"],"sourceRoot":""}